import mongoose, { Schema, Query } from "mongoose";

export interface IChord extends Document {
  name: String;
  url: String;
  bulletPoints: [string];
}

const chordSchema = new Schema<IChord>({
  name: { type: String, required: [true, "Name needs to be provided !"] },

  url: { type: String, required: [true, "Url needs to be provided !"] },

  bulletPoints: {
    type: [String],
    required: [true, "BulletPoints needs to be provided !"], // Array of strings
  },
  // start: Date,
});

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

chordSchema.pre(/^find/, function (next) {
  this.set("start", Date.now());
  next();
});

chordSchema.post(/^find/, function (next) {
  console.log(`Query took ${Date.now() - this.get("start")} miliseconds`);
});

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

const Chords = mongoose.model<IChord>("chord", chordSchema);

export default Chords;
